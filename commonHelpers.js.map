{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGallaryItem = itemImages => {\n  return itemImages\n    .map(\n      images =>\n        `<div class=\"js-section-images\">\n        <a href=\"${images.largeImageURL}\">\n        <img\n          src=\"${images.webformatURL}\"\n          alt=\"${images.tags}\"\n          class=\"js-gallery-img\"\n        /></a>\n        <div class=\"js-group-text\">\n          <small class=\"js-text\"\n            >Likes <span class=\"js-span-text\">${images.likes}</span></small\n          >\n          <small class=\"js-text\"\n            >Views <span class=\"js-span-text\">${images.views}</span></small\n          >\n          <small class=\"js-text\"\n            >Comments <span class=\"js-span-text\">${images.comments}</span></small\n          >\n          <small class=\"js-text\"\n            >Downloads\n            <span class=\"js-span-text\">${images.downloads}</span></small\n          >\n        </div>\n    </div>`\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nexport const PER_PAGE = 15;\nconst API_KEY = '43826847-f350fa9fd32410ec3fefedfc5';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = async (q = 'flowers', newsPage = 1) => {\n  const searchParams = {\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: PER_PAGE,\n    page: newsPage,\n  };\n  return await axios('', {\n    params: {\n      ...searchParams,\n    },\n  });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { createGallaryItem } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport { PER_PAGE } from './js/pixabay-api';\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst searchFormEl = document.querySelector('.form-field');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-btn');\n\nlet searchQuery = '';\nlet newsCurrentPage = 1;\nlet totalPages = 0;\n\nloadMoreBtnEl.classList.add('d-none');\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  newsCurrentPage = 1;\n  loadMoreBtnEl.classList.add('d-none');\n  searchQuery = event.target.elements.searchKeyword.value.trim();\n  if (searchQuery === '') {\n    galleryEl.innerHTML = '';\n    iziToast.error({\n      timeout: 2000,\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#d37a7a',\n      close: false,\n      closeOnClick: true,\n    });\n    event.target.reset();\n    return;\n  }\n\n  galleryEl.innerHTML = '';\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const { totalHits, data } = await fetchPhotosByQuery(\n      searchQuery,\n      newsCurrentPage\n    );\n    if (data.hits.length === 0) {\n      loaderEl.classList.add('is-hidden');\n      iziToast.error({\n        timeout: 2000,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        backgroundColor: '#d37a7a',\n        close: false,\n        closeOnClick: true,\n      });\n      event.target.reset();\n      return;\n    }\n\n    galleryEl.insertAdjacentHTML('beforeend', createGallaryItem(data.hits));\n\n    totalPages = Math.ceil(data.totalHits / PER_PAGE);\n\n    if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('d-none');\n    }\n\n    gallery.refresh();\n    if (newsCurrentPage >= totalPages) {\n      loadMoreBtnEl.classList.add('d-none');\n      iziToast.error({\n        timeout: 5000,\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fff',\n        backgroundColor: '#d37a7a',\n        close: false,\n        closeOnClick: true,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  event.target.reset();\n  loaderEl.classList.add('is-hidden');\n}\n\nconst smoothScrollOnLoadMore = () => {\n  const lastEl = galleryEl.querySelector('.js-section-images:last-child');\n  const newEl = lastEl.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: newEl,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nasync function onClickLoadMore(event) {\n  try {\n    newsCurrentPage += 1;\n    loadMoreBtnEl.classList.add('d-none');\n    loaderEl.classList.remove('is-hidden');\n    const { data, totalHits } = await fetchPhotosByQuery(\n      searchQuery,\n      newsCurrentPage\n    );\n    galleryEl.insertAdjacentHTML('beforeend', createGallaryItem(data.hits));\n    gallery.refresh();\n    smoothScrollOnLoadMore();\n    totalPages = Math.ceil(data.totalHits / PER_PAGE);\n    if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('d-none');\n    }\n    loaderEl.classList.add('is-hidden');\n    if (newsCurrentPage >= totalPages) {\n      loadMoreBtnEl.classList.add('d-none');\n      iziToast.error({\n        timeout: 5000,\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fff',\n        backgroundColor: '#d37a7a',\n        close: false,\n        closeOnClick: true,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onClickLoadMore);\n"],"names":["createGallaryItem","itemImages","images","PER_PAGE","API_KEY","axios","fetchPhotosByQuery","q","newsPage","gallery","SimpleLightbox","galleryEl","searchFormEl","loaderEl","loadMoreBtnEl","searchQuery","newsCurrentPage","totalPages","onSearchFormSubmit","event","iziToast","totalHits","data","error","smoothScrollOnLoadMore","newEl","onClickLoadMore"],"mappings":"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"}