{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGallaryItem = itemImages => {\n  return itemImages\n    .map(\n      images =>\n        `<div class=\"js-section-images\">\n        <a href=\"${images.largeImageURL}\">\n        <img\n          src=\"${images.webformatURL}\"\n          alt=\"${images.tags}\"\n          class=\"js-gallery-img\"\n        /></a>\n        <div class=\"js-group-text\">\n          <small class=\"js-text\"\n            >Likes <span class=\"js-span-text\">${images.likes}</span></small\n          >\n          <small class=\"js-text\"\n            >Views <span class=\"js-span-text\">${images.views}</span></small\n          >\n          <small class=\"js-text\"\n            >Comments <span class=\"js-span-text\">${images.comments}</span></small\n          >\n          <small class=\"js-text\"\n            >Downloads\n            <span class=\"js-span-text\">${images.downloads}</span></small\n          >\n        </div>\n    </div>`\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nexport const PER_PAGE = 15;\nconst API_KEY = '43826847-f350fa9fd32410ec3fefedfc5';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = async (q = 'flowers', newsPage = 1) => {\n  const searchParams = {\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: PER_PAGE,\n    page: newsPage,\n  };\n  return await axios('', {\n    params: {\n      ...searchParams,\n    },\n  });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { createGallaryItem } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport { PER_PAGE } from './js/pixabay-api';\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst searchFormEl = document.querySelector('.form-field');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-btn');\n\nlet newsCurrentPage = 1;\nlet searchQuery = '';\nlet totalPages = 0;\nloadMoreBtnEl.classList.add('d-none');\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  loadMoreBtnEl.classList.add('d-none');\n  searchQuery = event.target.elements.searchKeyword.value.trim();\n  if (searchQuery === '') {\n    galleryEl.innerHTML = '';\n    event.target.reset();\n\n    iziToast.error({\n      timeout: 2000,\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#d37a7a',\n      close: false,\n      closeOnClick: true,\n    });\n    return;\n  }\n\n  galleryEl.innerHTML = '';\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const { totalHits, data } = await fetchPhotosByQuery(\n      searchQuery,\n      newsCurrentPage\n    );\n    if (data.hits.length === 0) {\n      loadMoreBtnEl.classList.add('d-none');\n      iziToast.error({\n        timeout: 2000,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        backgroundColor: '#d37a7a',\n        close: false,\n        closeOnClick: true,\n      });\n    }\n\n    galleryEl.insertAdjacentHTML('beforeend', createGallaryItem(data.hits));\n\n    totalPages = Math.ceil(data.totalHits / PER_PAGE);\n\n    if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('d-none');\n    }\n\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    // lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n\n  event.target.reset();\n  loaderEl.classList.add('is-hidden');\n}\n\nconst smoothScrollOnLoadMore = () => {\n  const lastEl = galleryEl.querySelector('.js-section-images:last-child');\n  const newEl = lastEl.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: newEl,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nloadMoreBtnEl.addEventListener('click', onClickLoadMore);\n\nasync function onClickLoadMore(event) {\n  newsCurrentPage += 1;\n  loadMoreBtnEl.classList.add('d-none');\n  loaderEl.classList.remove('is-hidden');\n  const { data } = await fetchPhotosByQuery(searchQuery, newsCurrentPage);\n  galleryEl.insertAdjacentHTML('beforeend', createGallaryItem(data.hits));\n\n  smoothScrollOnLoadMore();\n  totalPages = Math.ceil(data.totalHits / PER_PAGE);\n  if (totalPages > 1) {\n    loadMoreBtnEl.classList.remove('d-none');\n  }\n  loaderEl.classList.add('is-hidden');\n\n  if (newsCurrentPage > totalPages) {\n    loadMoreBtnEl.classList.add('d-none');\n    loadMoreBtnEl.removeEventListener('click', onClickLoadMore);\n    iziToast.error({\n      timeout: 2000,\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: '#fff',\n      backgroundColor: '#d37a7a',\n      close: false,\n      closeOnClick: true,\n    });\n  }\n}\n"],"names":["createGallaryItem","itemImages","images","PER_PAGE","API_KEY","axios","fetchPhotosByQuery","q","newsPage","galleryEl","searchFormEl","loaderEl","loadMoreBtnEl","newsCurrentPage","searchQuery","totalPages","onSearchFormSubmit","event","iziToast","totalHits","data","SimpleLightbox","error","smoothScrollOnLoadMore","newEl","onClickLoadMore"],"mappings":"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"}